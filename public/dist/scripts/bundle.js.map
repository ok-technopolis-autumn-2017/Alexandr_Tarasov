{"version":3,"sources":["webpack:///webpack/bootstrap 468e1dd6509e02a2c5ff","webpack:///./src/scripts/utils/ExtendEventable.js","webpack:///./src/scripts/utils/Eventable.js","webpack:///./src/scripts/views/ViewState.js","webpack:///./src/scripts/main.js","webpack:///./src/scripts/units/TodosListModel.js","webpack:///./src/scripts/units/TodoModel.js","webpack:///./src/scripts/units/TodosContainer.js","webpack:///./src/scripts/units/TodosAddbar.js","webpack:///./src/scripts/units/TodosList.js","webpack:///./src/scripts/units/TodoItem.js","webpack:///./src/scripts/utils/TemplateEngine.js","webpack:///./src/scripts/units/TodosActionbar.js","webpack:///./src/scripts/units/Filter.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;;AAEA;AACA,WAAW,SAAS;AACpB,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACbA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,2BAA2B;AACjD;AACA;;AAEA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mDAAmD,SAAS;AAC5D;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChDA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,2BAA2B,mBAAmB;AAC9C,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC/BA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;;;;;;;AC9DA;AACA;;AAEA;AACA,WAAW,kBAAkB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA,6CAA6C,oBAAoB;;AAEjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA,yCAAyC,KAAK;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;;;;;;ACpJA;;AAEA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA,uCAAuC,2BAA2B;;AAElE;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;;;;;;ACpEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;;;;;;;AC5BA;;AAEA;AACA,aAAa;AACb,WAAW,YAAY;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4CAA4C,gBAAgB;AAC5D;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACjEA;AACA;AACA;;AAEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,WAAW,UAAU;AACrB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,UAAU;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;;;;;;;AC3IA;AACA;;AAEA;AACA,aAAa;AACb,WAAW,UAAU;AACrB;AACA;AACA;AACA;;AAEA,2CAA2C,wBAAwB;;AAEnE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,YAAY;AACvB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7HA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpCA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA,8CAA8C,+CAA+C;AAC7F;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrEA;AACA;;AAEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,0BAA0B;AAC7C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 468e1dd6509e02a2c5ff","const Eventable = require('./Eventable');\n\n/**\n * @param {Function} Extendable\n * @return {Function} Extendable\n */\nfunction ExtendEventable(Extendable) {\n    for (let proto in Eventable.prototype) {\n        Extendable.prototype[proto] = Eventable.prototype[proto];\n    }\n    return Extendable;\n}\n\nmodule.exports = ExtendEventable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/utils/ExtendEventable.js\n// module id = 0\n// module chunks = 0","function Eventable() {\n}\n\nEventable.prototype._initEventable = function () {\n    this._eventable_registry = {};\n};\n\nfunction getEventSubscribers(eventable, eventName, needToCreate) {\n    let registry = eventable._eventable_registry;\n\n    if (eventName in registry) {\n        return registry[eventName];\n    } else if (needToCreate) {\n        return registry[eventName] = [];\n    }\n    return null;\n}\n\nEventable.prototype.on = function (eventName, handler, ctx) {\n    let subscribers = getEventSubscribers(this, eventName, true);\n    subscribers.push({handler: handler, ctx: ctx});\n    return this;\n};\n\nEventable.prototype.off = function (eventName, handler, ctx) {\n    let subscribers = getEventSubscribers(this, eventName);\n    if (subscribers) {\n        for (let i = subscribers.length; i--;) {\n            if ((subscribers[i].handler === handler) && (subscribers[i].ctx === ctx)) {\n                subscribers.splice(i, 1);\n                return this;\n            }\n        }\n    }\n    return this;\n};\n\nEventable.prototype.trigger = function (eventName, data) {\n    let subscribers = getEventSubscribers(this, eventName);\n    if (subscribers) {\n        let subscribersCopy = subscribers.slice();\n        for (let i = 0, l = subscribersCopy.length; i !== l; i += 1) {\n            subscribersCopy[i].handler.call(subscribersCopy[i].ctx, data);\n        }\n    }\n    return this;\n};\n\nmodule.exports = Eventable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/utils/Eventable.js\n// module id = 1\n// module chunks = 0","const ExtendEventable = require('../utils/ExtendEventable');\n\n/**\n * @constructor\n */\nfunction ViewState() {\n    this._initEventable();\n\n    this.filter = 'all';\n}\n\nExtendEventable(ViewState);\n\nViewState.prototype.onChange = function (handler, ctx) {\n    this.on('filterChanged', function (filterName) {\n        handler.call(ctx, {filter: filterName});\n    });\n};\n\nViewState.prototype.setFilter = function (filterName) {\n    this.filter = filterName;\n    this.trigger('filterChanged', filterName);\n    return this;\n};\n\nViewState.prototype.getFilter = function () {\n    return this.filter;\n};\n\nconst viewState = new ViewState();\n\nmodule.exports = viewState;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/views/ViewState.js\n// module id = 2\n// module chunks = 0","document.addEventListener('DOMContentLoaded', init);\n\nconst TodosListModel = require('./units/TodosListModel');\nconst TodosContainer = require('./units/TodosContainer');\nconst TodoAddbar = require('./units/TodosAddbar');\nconst TodosList = require('./units/TodosList');\nconst TodosActionbar = require('./units/TodosActionbar');\nconst viewState = require('./views/ViewState');\n\nfunction init() {\n    const mainWrapper = document.querySelector('.todo-main-wrapper');\n    const todosContainer = new TodosContainer(mainWrapper.querySelector('.todo-container'));\n    const todoAddbar = new TodoAddbar(mainWrapper.querySelector('.todo-add'));\n    const todosList = new TodosList(mainWrapper.querySelector('.todo-items'));\n    const todosActionbar = new TodosActionbar(mainWrapper.querySelector('.todo-bottom'));\n    const todosListModel = new TodosListModel([]);\n\n    viewState.onChange(function (data) {\n        todosList.filterItems(data['filter']);\n    });\n\n    todosListModel.onChange(function () {\n        todosContainer.setVisibility(todosListModel.getList().length !== 0);\n\n        let leftItemsNumber = todosListModel.getLeftItemsNumber();\n        todosActionbar.setLeftItemsNumber(leftItemsNumber);\n\n        todosActionbar.setClearCompletedVisibility(todosListModel.getList().length > leftItemsNumber);\n    });\n\n    todoAddbar\n        .on('todoCreated', function (inputData) {\n            todosListModel.add(inputData);\n        })\n        .on('selectAll', function () {\n            todosListModel.getList()\n                .filter(function (model) {\n                    return !model.get('isReady');\n                })\n                .forEach(function (model) {\n                    model.set('isReady', true);\n                })\n        });\n\n    todosListModel\n        .on('todoAdd', function (model) {\n            todosList.addTodo(model);\n        })\n        .on('todoRemove', function (model) {\n            todosList.remove(model);\n        })\n        .on('todoChange', function () {\n            todosList.filterItems();\n        });\n\n    todosActionbar\n        .on('clearCompleted', function () {\n            todosListModel.clearCompleted();\n        })\n        .on('filterSelected', function (filter) {\n            viewState.setFilter(filter);\n        });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/main.js\n// module id = 3\n// module chunks = 0","const ExtendEventable = require('../utils/ExtendEventable');\nconst TodoModel = require('./TodoModel');\n\n/**\n * @param {Array.<TodoModel>} dataItems\n * @constructor\n */\nfunction TodosListModel(dataItems) {\n    this._initEventable();\n\n    this._itemIds = 0;\n    this._itemModels = dataItems || [];\n    this._left = 0;\n}\n\nExtendEventable(TodosListModel);\n\n/**\n * Returns list models.\n * @returns {Array.<TodoModel>}\n */\nTodosListModel.prototype.getList = function () {\n    return this._itemModels;\n};\n\n/**\n * @returns {Number}\n */\nTodosListModel.prototype.getLeftItemsNumber = function () {\n    return this._left;\n};\n\n/**\n *\n * @param {Function} handler\n * @param {Object} [ctx]\n * @returns {TodosListModel}\n */\nTodosListModel.prototype.onChange = function (handler, ctx) {\n    this\n        .on('todoAdd', handler)\n        .on('todoRemoved', handler)\n        .on('todoChange', handler)\n        .on('modelReadyChanged', function (model) {\n            if (model.get('isReady') && this._left !== 0) {\n                this._left -= 1;\n            } else {\n                this._left += 1;\n            }\n            this.trigger('todoChange');\n            handler.call(ctx);\n        }, this)\n        .on('modelRemoved', function (model) {\n            this.remove(model.get('id'));\n            this.trigger('todoChange');\n            handler.call(ctx);\n        }, this)\n        .on('modelChanged', function () {\n            this.trigger('todoChange');\n            handler.call(ctx)\n        }, this);\n\n    return this;\n};\n\n/**\n *\n * @param {Object} inputData\n * @returns {TodosListModel}\n */\nTodosListModel.prototype.add = function (inputData) {\n    let model = new TodoModel(Object.assign({id: this._itemIds++}, inputData));\n\n    model.onAnyChange(function (data) {\n        switch (data['field']) {\n            case 'isReady':\n                this.trigger('modelReadyChanged', model);\n                break;\n            case 'deleted':\n                this.trigger('modelRemoved', model);\n                break;\n            default:\n                this.trigger('modelChanged', model);\n                break;\n        }\n    }, this);\n\n    if (!model.get('isReady')) {\n        this._left += 1;\n    }\n\n    this._itemModels.push(model);\n\n    this.trigger('todoAdd', model);\n    return this;\n};\n\n/**\n * @param {Number} id\n * @returns {TodoModel|null}\n * @private\n */\nTodosListModel.prototype._getModelById = function (id) {\n    for (let i = this._itemModels.length; i--;) {\n        if (this._itemModels[i].get('id') === id) {\n            return this._itemModels[i];\n        }\n    }\n    return null;\n};\n\n/**\n * @param {Number} id\n * @returns {TodosListModel}\n */\nTodosListModel.prototype.remove = function (id) {\n    let model = this._getModelById(id);\n\n    if (model) {\n        if (!model.get('isReady')) {\n            this._left -= 1;\n        }\n\n        this.trigger('todoRemove', model);\n        model.off('modelFieldChanged', this);\n\n        let modelIndex = this.getList().indexOf(model);\n        this.getList().splice(modelIndex, 1);\n\n        this.trigger('todoRemoved');\n    }\n\n    return this;\n};\n\n/**\n * @returns {TodosListModel}\n */\nTodosListModel.prototype.clearCompleted = function () {\n    let copyModels = this.getList().slice();\n    copyModels.forEach(function (model) {\n        if (model.get('isReady')) {\n            this.remove(model.get('id'));\n        }\n    }, this);\n    return this;\n};\n\nmodule.exports = TodosListModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/units/TodosListModel.js\n// module id = 4\n// module chunks = 0","const ExtendEventable = require('../utils/ExtendEventable');\n\n/**\n * @param {Object} data\n * @constructor\n */\nfunction TodoModel(data) {\n    this._initEventable();\n\n    this._model = {\n        id: data.id,\n        isReady: data.isReady || false,\n        text: data.text\n    };\n}\n\nExtendEventable(TodoModel);\n\n/**\n * @param {String} field\n * @param {*} value\n * @returns {TodoModel}\n */\nTodoModel.prototype.set = function (field, value) {\n    this._model[field] = value;\n    this.trigger('modelFieldChanged', {field: field, value: value});\n\n    return this;\n};\n\n/**\n * @param {String} field\n * @returns {*}\n */\nTodoModel.prototype.get = function (field) {\n    return this._model[field];\n};\n\n/**\n * @param {String} field\n * @param {Function} handler\n * @param {Object} [ctx]\n * @returns {TodoModel}\n */\nTodoModel.prototype.onChange = function (field, handler, ctx) {\n    this.on('modelFieldChanged', function (data) {\n        if (data.field === field) {\n            handler.call(ctx, data);\n        }\n    }, this);\n\n    return this;\n};\n\n/**\n * @param {Function} handler\n * @param {Object} [ctx]\n * @returns {TodoModel}\n */\nTodoModel.prototype.onAnyChange = function (handler, ctx) {\n    this.on('modelFieldChanged', function (data) {\n        handler.call(ctx, data);\n        this.trigger('modelChanged', this);\n    }, this);\n\n    return this;\n};\n\nmodule.exports = TodoModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/units/TodoModel.js\n// module id = 5\n// module chunks = 0","/**\n * @param {HTMLElement} root\n * @constructor\n */\nfunction TodosContainer(root) {\n    this._root = root;\n}\n\n/**\n * @param {Boolean} isVisible\n * @returns {TodosContainer}\n */\nTodosContainer.prototype.setVisibility = function (isVisible) {\n    if (isVisible) {\n        this._root.classList.remove('__empty');\n    } else {\n        this._root.classList.add('__empty');\n    }\n    return this;\n};\n\n/**\n * @returns {HTMLElement}\n */\nTodosContainer.prototype.getRoot = function () {\n    return this._root;\n};\n\nmodule.exports = TodosContainer;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/units/TodosContainer.js\n// module id = 6\n// module chunks = 0","const ExtendEventable = require('../utils/ExtendEventable');\n\n/**\n * @extends {EventListener}\n * @param {HTMLElement} root\n * @constructor\n */\nfunction TodosAddbar(root) {\n    this._initEventable();\n\n    this._root = root;\n    this._input = root.querySelector('.todo-add_input');\n    this._selectAllButton = root.querySelector('.todo-add_select-all');\n\n    this._input.addEventListener('keypress', this);\n    this._selectAllButton.addEventListener('click', this);\n}\n\nExtendEventable(TodosAddbar);\n\n/**\n * @callback handleEvent\n * @private\n * @returns {Eventable}\n */\nTodosAddbar.prototype._onSelectAll = function () {\n    return this.trigger('selectAll');\n};\n\n/**\n * @callback handleEvent\n * @private\n * @returns {Eventable}\n */\nTodosAddbar.prototype._onTodoAdd = function () {\n    let inputText = this._input.value.trim();\n\n    if (inputText.length !== 0) {\n        this._input.value = '';\n        this._input.blur();\n\n        return this.trigger('todoCreated', {text: inputText});\n    }\n};\n\n/**\n * @returns {HTMLElement|*}\n */\nTodosAddbar.prototype.getRoot = function () {\n    return this._root;\n};\n\nTodosAddbar.prototype.handleEvent = function (e) {\n    switch (e.type) {\n        case 'click':\n            this._onSelectAll();\n            break;\n        case 'keypress':\n            if (e.keyCode === 13) {\n                this._onTodoAdd();\n            }\n            break;\n    }\n};\n\nmodule.exports = TodosAddbar;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/units/TodosAddbar.js\n// module id = 7\n// module chunks = 0","const ExtendEventable = require('../utils/ExtendEventable');\nconst TodoItem = require('./TodoItem');\nconst viewState = require('../views/ViewState');\n\n/**\n * @param {HTMLElement} root\n * @constructor\n */\nfunction TodosList(root) {\n    this._initEventable();\n\n    this._root = root;\n    /**\n     * @type {Array.<TodoItem>}\n     * @private\n     *\n     */\n    this._items = [];\n    this._left = 0;\n}\n\nExtendEventable(TodosList);\n\n/**\n * @returns {Number}\n */\nTodosList.prototype.getTodosCount = function () {\n    return this._items.length;\n};\n\n/**\n * @param {TodoModel} model\n * @returns {TodosList}\n */\nTodosList.prototype.addTodo = function (model) {\n    let item = new TodoItem(model);\n    this._items.push(item);\n\n    item.on('todoChange', this._onTodoChange, this)\n        .render(this._root);\n\n    this.filterItems();\n    return this;\n};\n\n/**\n * @returns {TodosList}\n */\nTodosList.prototype.clearCompleted = function () {\n    for (let i = this._items.length; i--;) {\n        if (this._items[i]._model.get('isReady')) {\n            this._items[i].remove();\n        }\n    }\n    return this;\n};\n\n/**\n * @param {Number} id\n * @returns {TodoItem}\n * @private\n */\nTodosList.prototype._getItemById = function (id) {\n    for (let i = this._items.length; i--;) {\n        if (this._items[i]._model.get('id') === id) {\n            return this._items[i];\n        }\n    }\n    return null;\n};\n\n/**\n * @callback addTodo\n * @private\n * @returns {TodosList}\n */\nTodosList.prototype._onTodoChange = function () {\n    this.filterItems(viewState.getFilter());\n    return this;\n};\n\n/**\n * @param {TodoModel} model\n * @returns {TodosList}\n */\nTodosList.prototype.remove = function (model) {\n    let item = this._getItemById(model.get('id'));\n    if (item) {\n        item.off('todoChange', this._onTodoChange, this);\n        item.remove();\n        let itemIndex = this._items.indexOf(item);\n        this._items.splice(itemIndex, 1);\n    }\n\n    return this;\n};\n\n/**\n * @returns {TodosList}\n */\nTodosList.prototype.selectAll = function () {\n    this._items.forEach(function (item) {\n        item.changeReady(true);\n    });\n    return this;\n};\n\n/**\n * @param {String} [filter]\n * @returns {TodosList}\n */\nTodosList.prototype.filterItems = function (filter) {\n    if (!filter) {\n        filter = viewState.getFilter();\n    }\n\n    this._items.forEach(function (item) {\n        switch (filter) {\n            case 'all':\n                item.visible(true);\n                break;\n            case 'completed':\n                item.visible(item._model.get('isReady'));\n                break;\n            case 'active':\n                item.visible(!item._model.get('isReady'));\n                break;\n        }\n    });\n    return this;\n};\n\n/**\n * @returns {HTMLElement|*}\n */\nTodosList.prototype.getRoot = function () {\n    return this._root;\n};\n\nmodule.exports = TodosList;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/units/TodosList.js\n// module id = 8\n// module chunks = 0","const ExtendEventable = require('../utils/ExtendEventable');\nconst TemplateEngine = require('../utils/TemplateEngine');\n\n/**\n * @extends {EventListener}\n * @param {TodoModel} model\n * @constructor\n */\nfunction TodoItem(model) {\n    this._initEventable();\n\n    let element = TemplateEngine.todoItem({text: model.get('text')});\n\n    this._root = element.root;\n    this._readyMark = element.readyMark;\n    this._remove = element.remove;\n    this._text = element.text;\n    this._model = model;\n\n    this._model.onChange('isReady', function (data) {\n        this._manageReadyModifier(data['value']);\n    }, this);\n\n    this._readyMark.addEventListener('change', this);\n    this._remove.addEventListener('click', this);\n}\n\nExtendEventable(TodoItem);\n\n/**\n * @param {HTMLElement} parent\n * @returns {TodoItem}\n */\nTodoItem.prototype.render = function (parent) {\n    parent.appendChild(this._root);\n    return this;\n};\n\n/**\n * @callback handleEvent\n * @param {String} newText\n * @returns {TodoItem}\n * @private\n */\nTodoItem.prototype._onSetText = function (newText) {\n    if (this._model.get('text') !== newText) {\n        this._text.innerText = newText;\n        this._model.set('text', newText);\n    }\n    return this;\n};\n\n/**\n * @param {Boolean} isReady\n * @returns {TodoItem}\n * @private\n */\nTodoItem.prototype._manageReadyModifier = function (isReady) {\n    if (isReady) {\n        this._root.classList.add('__ready');\n    } else {\n        this._root.classList.remove('__ready');\n    }\n    this._readyMark.checked = isReady;\n    return this;\n};\n\n/**\n * @param {Boolean} isReady\n * @returns {TodoItem}\n */\nTodoItem.prototype.changeReady = function (isReady) {\n    if (isReady !== this._model.get('isReady')) {\n        this._model.set('isReady', isReady);\n        this._manageReadyModifier(isReady);\n        this.trigger('todoChange', this._model);\n    }\n    return this;\n};\n\n/**\n * @callback handleEvent\n * @private\n */\nTodoItem.prototype._onRemove = function () {\n    this._model.set('deleted', true);\n};\n\n/**\n * @returns {TodoItem}\n */\nTodoItem.prototype.remove = function () {\n    this._root.parentNode.removeChild(this._root);\n    return this;\n};\n\n/**\n * @param {Boolean} isVisible\n * @returns {TodoItem}\n */\nTodoItem.prototype.visible = function (isVisible) {\n    if (isVisible) {\n        this._root.classList.remove('__hide');\n    } else {\n        this._root.classList.add('__hide');\n    }\n    return this;\n};\n\nTodoItem.prototype.handleEvent = function (e) {\n    switch (e.type) {\n        case 'change':\n            this.changeReady(this._readyMark.checked);\n            break;\n        case 'click':\n            if (e.target === this._remove) {\n                this._onRemove();\n            }\n            break;\n        case 'blur':\n            this._onSetText(this._text.innerText);\n            break;\n    }\n};\n\nmodule.exports = TodoItem;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/units/TodoItem.js\n// module id = 9\n// module chunks = 0","let divElement = document.createElement('div');\n\nfunction getTemplateRootNode(scriptId) {\n    let script = document.getElementById(scriptId);\n    divElement.innerHTML = script.innerHTML;\n\n    let result = divElement.children[0];\n    divElement.removeChild(result);\n\n    return result;\n}\n\nlet templateEngine = {\n    todoItem: function (data) {\n        let root = getTemplateRootNode('itemTemplate');\n        let readyMark = root.querySelector('.todo-item_ready-mark');\n        let remove = root.querySelector('.todo-item_close');\n        let text = root.querySelector('.todo-item_text');\n\n        if (data.text) {\n            text.innerText = data.text;\n        }\n\n        if (data.isReady) {\n            readyMark.checked = true;\n        }\n\n        return {\n            root: root,\n            text: text,\n            readyMark: readyMark,\n            remove: remove\n        };\n    }\n};\n\nmodule.exports = templateEngine;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/utils/TemplateEngine.js\n// module id = 10\n// module chunks = 0","const ExtendEventable = require('../utils/ExtendEventable');\nconst Filter = require('./Filter');\n\n/**\n * @extends {EventListener}\n * @param root\n * @constructor\n */\nfunction TodosActionbar(root) {\n    this._initEventable();\n\n    this._root = root;\n    this._counter = root.querySelector('.todo-bottom_left-items');\n    this._clearCompletedButton = root.querySelector('.todo-bottom_clear-completed');\n    this._filters = new Filter(root.querySelector('.todo-bottom_items-filters'));\n\n    this._filters.on('filterSpecified', this._onFilterSpecified, this);\n\n    this._clearCompletedButton.addEventListener('click', this);\n}\n\nExtendEventable(TodosActionbar);\n\n/**\n * @callback handleEvent\n * @private\n * @returns {Eventable}\n */\nTodosActionbar.prototype._onFilterSpecified = function (filterName) {\n    return this.trigger('filterSelected', filterName);\n};\n\n/**\n * @callback handleEvent\n * @private\n * @returns {Eventable}\n */\nTodosActionbar.prototype._onClearCompleted = function () {\n    return this.trigger('clearCompleted');\n};\n\n/**\n * @param {Number} number\n * @returns {TodosActionbar}\n */\nTodosActionbar.prototype.setLeftItemsNumber = function (number) {\n    this._counter.innerHTML = number + '&nbsp;' + (number === 1 ? 'item' : 'items') + '&nbsp;left';\n    return this;\n};\n\n/**\n * @param {Boolean} isVisible\n * @returns {TodosActionbar}\n */\nTodosActionbar.prototype.setClearCompletedVisibility = function (isVisible) {\n    if (isVisible) {\n        this._clearCompletedButton.classList.remove('__hide');\n    } else {\n        this._clearCompletedButton.classList.add('__hide');\n    }\n    return this;\n};\n\nTodosActionbar.prototype.handleEvent = function (e) {\n    if (e.type === 'click') {\n        this._onClearCompleted();\n    }\n};\n\nmodule.exports = TodosActionbar;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/units/TodosActionbar.js\n// module id = 11\n// module chunks = 0","const ExtendEventable = require('../utils/ExtendEventable');\nconst Eventable = require('../utils/Eventable');\n\n/**\n * @param {HTMLElement} root\n * @constructor\n */\nfunction Filter(root) {\n    this._initEventable();\n\n    this._filters = root.querySelectorAll('.todo-bottom_items-filter');\n    this._activeFilter = null;\n\n    for (let i = 0; i < this._filters.length; i++) {\n        this._filters[i].addEventListener('click', this);\n\n        if (this._filters[i].classList.contains('__active')) {\n            this._activeFilter = this._filters[i];\n        }\n    }\n}\n\nExtendEventable(Filter, Eventable);\n\n/**\n * @param {HTMLElement} filter\n * @callback handleEvent\n * @private\n */\nFilter.prototype._onSetFilter = function (filter) {\n    if (this._activeFilter !== filter) {\n        this._activeFilter.classList.remove('__active');\n        filter.classList.add('__active');\n\n        this._activeFilter = filter;\n        this.trigger('filterSpecified', filter.dataset.filter);\n    }\n    return this;\n};\n\nFilter.prototype.handleEvent = function (e) {\n    if (e.type === 'click') {\n        this._onSetFilter(e.target);\n    }\n};\n\nmodule.exports = Filter;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scripts/units/Filter.js\n// module id = 12\n// module chunks = 0"],"sourceRoot":""}